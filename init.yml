- name: Initialization of localhost to be able to use the different playbooks
  hosts: localhost

  tasks:

  - name: Add foreman-client repository
    yum_repository:
      name: foreman-client
      description: Foreman client latest
      baseurl: http://yum.theforeman.org/client/latest/el7/$basearch/

  - name: Get current version of Python
    debug:
      msg:
      - "Ansible version: {{ ansible_version.full }}"
      - "Python version: {{ ansible_python_version }}"

  - name: Upgrade all packages
    yum:
      name: '*'
      state: latest

  - name: Install ansible-collection-theforeman-foreman package
    yum:
      name: ansible-collection-theforeman-foreman
      disable_gpg_check: yes
      state: latest
